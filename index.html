<!DOCTYPE html><html class="default no-js"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@ryandur/sand</title><meta name="description" content="Documentation for @ryandur/sand"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem(&quot;tsd-theme&quot;) || &quot;os&quot;)</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@ryandur/sand</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@ryandur/sand</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#sand" id="sand" style="color: inherit; text-decoration: none;">
  <h1>Sand</h1>
</a>
<p>A library should support your decisions while allowing you to leave an impression for others to follow.</p>
<p>I made this little library of helper functions to aid my development of javascript/typescript applications and learn
more about the functional paradigm.</p>
<p><a href="https://ryandur.github.io/sand/modules.html">Docs</a></p>
<p><img src="./badges/coverage-branches.svg" alt="branches">  <img src="./badges/coverage-functions.svg" alt="Functions">  <img src="./badges/coverage-lines.svg" alt="lines">  <img src="./badges/coverage-statements.svg" alt="statements"></p>

<a href="#maybe-how-you-would-like-to-use-it" id="maybe-how-you-would-like-to-use-it" style="color: inherit; text-decoration: none;">
  <h2>Maybe how you would like to use it.</h2>
</a>
<p>Let&#39;s look at how we might use this lib. Imagine we are creating an
art <a href="https://peaceful-heyrovsky-96583c.netlify.app/gallery?page=1&amp;size=8&amp;tab=aic">gallery</a>, and we want to take a closer
look at one of the pieces. To get the piece of art we send a request to a backend referencing it by id. The response
might take a little while, so we need a way to notify the user that the request is pending. Once we have
obtained the piece we will need to display it, or if the call has failed we need to notify that something went wrong.</p>
<p>In the example below we request the art via ID. While we wait, we notify the user that the content is loading. The
<em><strong>onPending</strong></em> function will fire the provided callback twice. Once when it is invoked and again once the call is done,
passing the pending state <em>(true then false)</em> as a parameter. Once the call is complete it will invoke either
<em><strong>onSuccess</strong></em> with te data or <em><strong>onFailure</strong></em> with a possible explanation.</p>
<pre><code class="language-typescript"><span class="hl-5">getArt</span><span class="hl-1">(</span><span class="hl-4">id</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-5">onPending</span><span class="hl-1">(</span><span class="hl-4">isLoading</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-5">onSuccess</span><span class="hl-1">(</span><span class="hl-4">updatePiece</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-5">onFailure</span><span class="hl-1">(</span><span class="hl-4">hasErrored</span><span class="hl-1">);</span>
</code></pre>
<p>To handle the request, we make a http <em><strong>GET</strong></em> to the endpoint with the id. We validate the response, if the response
is structured correctly pass back the successful response, else pass back a failure with some explanation.</p>
<pre><code class="language-typescript"><span class="hl-10">getArt</span><span class="hl-1">: (</span><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Result</span><span class="hl-1">.</span><span class="hl-8">Async</span><span class="hl-1">&lt;</span><span class="hl-8">Art</span><span class="hl-1">, </span><span class="hl-8">Explanation</span><span class="hl-1">&lt;</span><span class="hl-8">HTTPError</span><span class="hl-1">&gt;&gt; </span><span class="hl-0">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-4">http</span><span class="hl-1">.</span><span class="hl-5">get</span><span class="hl-1">(</span><span class="hl-6">`/some-endpoint/</span><span class="hl-0">${</span><span class="hl-4">id</span><span class="hl-0">}</span><span class="hl-6">`</span><span class="hl-1">)</span><br/><span class="hl-1">        .</span><span class="hl-5">flatMap</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">maybe</span><span class="hl-1">.</span><span class="hl-5">of</span><span class="hl-1">(</span><span class="hl-5">valid</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">))</span><br/><span class="hl-1">            .</span><span class="hl-5">map</span><span class="hl-1">(</span><span class="hl-4">asyncResult</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1">)</span><br/><span class="hl-1">            .</span><span class="hl-5">orElse</span><span class="hl-1">(</span><span class="hl-4">asyncResult</span><span class="hl-1">.</span><span class="hl-5">failure</span><span class="hl-1">(</span><span class="hl-5">explanation</span><span class="hl-1">(</span><span class="hl-4">HTTPError</span><span class="hl-1">.</span><span class="hl-2">CANNOT_DECODE</span><span class="hl-1">))))</span>
</code></pre>
<p>To make the request, we fetch from the endpoint. If there is some kind of network error we give back an explanation. If
successful, we check the response status. Since it&#39;s a <em><strong>GET</strong></em> we expect a 200 is a successful response, or we
consider it a failure. Then we get the <em><strong>JSON</strong></em> out of the response. If there is a problem with the <em><strong>JSON</strong></em> we pack
it into an explanation.</p>
<pre><code class="language-typescript"><span class="hl-10">get</span><span class="hl-1">: (</span><span class="hl-4">endpoint</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Result</span><span class="hl-1">.</span><span class="hl-8">Async</span><span class="hl-1">&lt;</span><span class="hl-8">Art</span><span class="hl-1">, </span><span class="hl-8">Explanation</span><span class="hl-1">&lt;</span><span class="hl-8">HTTPError</span><span class="hl-1">&gt;&gt; </span><span class="hl-0">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-4">asyncResult</span><span class="hl-1">.</span><span class="hl-5">of</span><span class="hl-1">(</span><span class="hl-5">fetch</span><span class="hl-1">(</span><span class="hl-4">endpoint</span><span class="hl-1">))</span><br/><span class="hl-1">        .</span><span class="hl-5">mapFailure</span><span class="hl-1">(</span><span class="hl-4">err</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-5">explanation</span><span class="hl-1">(</span><span class="hl-4">HTTPError</span><span class="hl-1">.</span><span class="hl-2">NETWORK_ERROR</span><span class="hl-1">, </span><span class="hl-4">maybe</span><span class="hl-1">.</span><span class="hl-5">some</span><span class="hl-1">(</span><span class="hl-4">err</span><span class="hl-1">)))</span><br/><span class="hl-1">        .</span><span class="hl-5">flatMap</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">status</span><span class="hl-1"> === </span><span class="hl-4">HTTPStatus</span><span class="hl-1">.</span><span class="hl-2">OK</span><span class="hl-1"> ?</span><br/><span class="hl-1">            </span><span class="hl-4">asyncResult</span><span class="hl-1">.</span><span class="hl-5">of</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-5">json</span><span class="hl-1">()).</span><span class="hl-5">mapFailure</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-4">err</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-5">explanation</span><span class="hl-1">(</span><span class="hl-4">HTTPError</span><span class="hl-1">.</span><span class="hl-2">JSON_BODY_ERROR</span><span class="hl-1">, </span><span class="hl-4">maybe</span><span class="hl-1">.</span><span class="hl-5">some</span><span class="hl-1">(</span><span class="hl-4">err</span><span class="hl-1">))</span><br/><span class="hl-1">            ) : </span><span class="hl-5">fail</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span>
</code></pre>

<a href="#examples-of-use" id="examples-of-use" style="color: inherit; text-decoration: none;">
  <h2>Examples of use</h2>
</a>
<p><a href="https://github.com/RyanDur/ChosenPicachu/tree/main/src/lib/components/Gallery">Gallery implementation</a></p>
<ul>
<li><a href="https://github.com/RyanDur/ChosenPicachu/blob/main/src/components/Gallery/Art/index.tsx#L19">Art</a></li>
<li><a href="https://github.com/RyanDur/ChosenPicachu/blob/main/src/components/Gallery/ArtPiece/index.tsx#L19">ArtPiece</a></li>
<li><a href="https://github.com/RyanDur/ChosenPicachu/blob/main/src/data/artGallery/index.ts#L11">handle request</a></li>
<li><a href="https://github.com/RyanDur/ChosenPicachu/blob/main/src/data/http.ts#L24">make request</a></li>
</ul>

<a href="#resources" id="resources" style="color: inherit; text-decoration: none;">
  <h2>Resources</h2>
</a>
<ul>
<li><a href="https://fsharpforfunandprofit.com/rop/">Railway Oriented Programming</a></li>
<li><a href="https://haskellbook.com/">Haskell Programming from First Principles</a></li>
<li><a href="https://github.com/dam5s/react-redux-starter/tree/main/src/prelude">React Redux Starter - ../prelude</a></li>
</ul>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="modules/Result.html">Result</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Maybe.html" class="tsd-kind-icon">Maybe</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Consumer" class="tsd-kind-icon">Consumer</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Predicate" class="tsd-kind-icon">Predicate</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Result" class="tsd-kind-icon">Result</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Supplier" class="tsd-kind-icon">Supplier</a></li><li class="tsd-kind-variable"><a href="modules.html#asyncResult" class="tsd-kind-icon">async<wbr/>Result</a></li><li class="tsd-kind-variable"><a href="modules.html#maybe" class="tsd-kind-icon">maybe</a></li><li class="tsd-kind-variable"><a href="modules.html#result" class="tsd-kind-icon">result</a></li><li class="tsd-kind-function"><a href="modules.html#empty" class="tsd-kind-icon">empty</a></li><li class="tsd-kind-function"><a href="modules.html#has" class="tsd-kind-icon">has</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#matchOn" class="tsd-kind-icon">match<wbr/>On</a></li><li class="tsd-kind-function"><a href="modules.html#not" class="tsd-kind-icon">not</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>